{%- assign fields = section.settings -%}

{%- assign mod_featured_tile_image_src = fields['featured_image'] | img_url: '1600x' -%}

{%- include 'tile-wall',
  mod_title: fields['title'],
  mod_featured_tile_image_src: mod_featured_tile_image_src,
  mod_featured_tile_text: fields['featured_text'],
  mod_featured_tile_title: fields['featured_title'],
  mod_featured_tile_url: fields['featured_url'],
  mod_tiles: section.blocks -%}

{%- assign fields = nil -%}
{%- assign mod_featured_tile_image_src = nil -%}

{% schema %}
  {
    "name": "Home Tile Wall",
    "max_blocks": 4,
    "settings": [{
      "type": "header",
      "content": "Content"
    }, {
      "type": "text",
      "id": "title",
      "label": "Title"
    }, {
      "type": "header",
      "content": "Featured Tile"
    }, {
      "type": "image_picker",
      "id": "featured_image",
      "label": "Image",
      "info": "Upload JPEG ~ 960x840px"
    }, {
      "type": "text",
      "id": "featured_title",
      "label": "Title"
    }, {
      "type": "text",
      "id": "featured_text",
      "label": "Text"
    }, {
      "type": "url",
      "id": "featured_url",
      "label": "URL"
    }],
    "blocks": [{
      "type": "tile",
      "name": "Tile",
      "settings": [{
        "type": "image_picker",
        "id": "image",
        "label": "Image",
        "info": "Upload JPEG ~ 450x325px"
      }, {
        "type": "text",
        "id": "title",
        "label": "Title"
      }, {
        "type": "text",
        "id": "text",
        "label": "Text"
      }, {
        "type": "url",
        "id": "url",
        "label": "URL"
      }]
    }]
  }
{% endschema %}
