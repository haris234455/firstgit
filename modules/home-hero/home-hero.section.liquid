{%- assign fields = section.settings -%}

{%- assign mod_image_desktop = fields['image_desktop'] | img_url: '2160x' -%}
{%- assign mod_image_text = fields['image_desktop'].alt -%}

{%- capture mod_image_src_media -%}
  <source media="(max-width: 599px)" data-srcset="{{- fields['image_mobile'] | img_url: '900x' -}}">
  <source media="(min-width: 600px) and (max-width: 999px)" data-srcset="{{- fields['image_intermediate'] | img_url: '1200x' -}}">
  <source media="(min-width: 1000px)" data-srcset="{{- mod_image_desktop -}}">
{%- endcapture -%}

{%- assign mod_video_fallback_intermediate = fields['image_intermediate'] | img_url: '1200x' -%}
{%- assign mod_video_fallback_text = fields['image_intermediate'].alt -%}

{%- capture mod_video_fallback_src_media -%}
  <source media="(max-width: 599px)" data-srcset="{{- fields['video_fallback_mobile'] | img_url: '900x' -}}">
  <source media="(min-width: 600px)" data-srcset="{{- mod_video_fallback_intermediate -}}">
{%- endcapture -%}

{%- include 'hero',
  mod_class: 'home-hero',
  mod_title: fields['title'],
  mod_cta_text: fields['cta_text'],
  mod_cta_url: fields['cta_url'],
  mod_cta_background_color: fields['cta_background_color'],
  mod_cta_text_color: fields['cta_text_color'],
  mod_shop_text: fields['shop_text'],
  mod_shop_link_text: fields['shop_link_text'],
  mod_shop_link_url: fields['shop_link_url'],
  mod_enable_overlay: fields['enable_overlay'],
  mod_text_color: fields['text_color'],
  mod_background: fields['background'],
  mod_image_src: mod_image_desktop,
  mod_image_src_media: mod_image_src_media,
  mod_image_text: mod_image_text,
  mod_video_url: fields['video_url'],
  mod_video_fallback_src: mod_video_fallback_intermediate,
  mod_video_fallback_src_media: mod_video_fallback_src_media,
  mod_video_fallback_text: mod_video_fallback_text, -%}

{%- assign fields = nil -%}
{%- assign mod_image_desktop = nil -%}
{%- assign mod_image_text = nil -%}
{%- assign mod_image_src_media = nil -%}
{%- assign mod_video_fallback_intermediate = nil -%}
{%- assign mod_video_fallback_text = nil -%}
{%- assign mod_video_fallback_src_media = nil -%}

{% schema %}
  {
    "name": "Home Hero",
    "settings": [{
      "type": "header",
      "content": "Content"
    }, {
      "type": "text",
      "id": "title",
      "label": "Title"
    }, {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text"
    }, {
      "type": "url",
      "id": "cta_url",
      "label": "CTA URL"
    }, {
      "type": "color",
      "id": "cta_background_color",
      "label": "CTA Background Color",
      "default": "#78c500"
    }, {
      "type": "color",
      "id": "cta_text_color",
      "label": "CTA Text Color",
      "default": "#ffffff"
    }, {
      "type": "text",
      "id": "shop_text",
      "label": "Shop Text"
    }, {
      "type": "text",
      "id": "shop_link_text",
      "label": "Shop Link Text"
    }, {
      "type": "url",
      "id": "shop_link_url",
      "label": "Shop Link URL"
    }, {
      "type": "header",
      "content": "Style"
    }, {
      "type": "checkbox",
      "id": "enable_overlay",
      "label": "Enable transparent overlay",
      "default": false
    }, {
      "type": "select",
      "id": "text_color",
      "label": "Select style",
      "options": [{
        "value": "light",
        "label": "Light"
      }, {
        "value": "dark",
        "label": "Dark"
      }],
      "default": "light"
    }, {
      "type": "select",
      "id": "background",
      "label": "Select the background asset to use for the hero",
      "options": [{
        "value": "image",
        "label": "Image"
      }, {
        "value": "video",
        "label": "Video"
      }],
      "default": "image"
    }, {
      "type": "header",
      "content": "Background Image"
    }, {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Image Desktop",
      "info": "Upload JPEG ~ 2160x1080px"
    }, {
      "type": "image_picker",
      "id": "image_intermediate",
      "label": "Image Intermediate",
      "info": "Upload JPEG ~ 1200x1080px"
    }, {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Image Mobile",
      "info": "Upload JPEG ~ 900x800px"
    }, {
      "type": "header",
      "content": "Background Video"
    }, {
      "type": "text",
      "id": "video_url",
      "label": "Video URL Desktop",
      "info": "Enter the video file URL hosted on your Vimeo PRO Account"
    }, {
      "type": "image_picker",
      "id": "video_fallback_intermediate",
      "label": "Video Fallback Intermediate",
      "info": "Upload JPEG ~ 1200x1080px"
    }, {
      "type": "image_picker",
      "id": "video_fallback_mobile",
      "label": "Video Fallback Mobile",
      "info": "Upload JPEG ~ 900x800px"
    }]
  }
{% endschema %}
